# Task 1.2.12: OFI-CVD背离检测

## 📋 任务信息

- **任务编号**: Task_1.2.12
- **任务名称**: OFI-CVD背离检测
- **所属阶段**: 阶段1.2 - 真实OFI+CVD计算
- **优先级**: 高
- **预计时间**: 3小时
- **实际时间**: ___（完成后填写）___
- **任务状态**: ⏳ 待开始

---

## 🎯 任务目标

实现OFI和CVD的背离检测，捕捉市场不一致信号，用于反转交易策略。

---

## 📝 任务清单

- [ ] 在 `ofi_cvd_fusion.py` 中添加背离检测方法
- [ ] 定义背离条件（正向、负向、不一致）
- [ ] 实现背离信号生成
- [ ] 测试背离检测效果
- [ ] 回测验证有效性

---

## 🔧 技术规格

### 背离类型

**1. 正向背离（潜在反转上涨）**:
```
条件:
- 价格创新低
- OFI上升（买单压力增加）
- CVD上升（买入成交增加）

含义: 价格下跌但买盘在积累，可能反弹
```

**2. 负向背离（潜在反转下跌）**:
```
条件:
- 价格创新高
- OFI下降（卖单压力增加）
- CVD下降（卖出成交增加）

含义: 价格上涨但卖盘在积累，可能回调
```

**3. OFI-CVD不一致**:
```
条件:
- z_ofi > 2 BUT z_cvd < -1
- z_ofi < -2 BUT z_cvd > 1

含义: 订单簿和成交信号矛盾，谨慎交易
```

---

## ✅ 验证标准

- [ ] 背离检测逻辑正确
- [ ] 信号生成准确
- [ ] 回测验证有效性（准确率>55%）
- [ ] 通过单元测试

---

## 📊 测试结果

### 回测结果
___（回测完成后填写）___

### 背离信号统计
- 正向背离次数: ___
- 负向背离次数: ___
- 不一致信号次数: ___
- 准确率: ___

---

## 🔗 相关文件

### Allowed files
- `src/ofi_cvd_fusion.py` (修改)
- `tests/test_ofi_cvd_fusion.py` (修改)

---

## ⚠️ 注意事项

1. ✅ 背离需要足够的历史数据
2. ✅ 背离信号相对较少，不能作为主要策略
3. ✅ 需要结合价格趋势判断
4. ✅ 回测验证非常重要

---

## 📋 DoD检查清单

- [ ] **代码无语法错误**
- [ ] **通过单元测试**
- [ ] **回测验证有效性**
- [ ] **产出真实验证结果**
- [ ] **更新相关文档**
- [ ] **提交Git**

---

## 📝 执行记录

### 遇到的问题
___（记录遇到的问题）___

### 解决方案
___（记录解决方案）___

###经验教训
___（记录经验教训）___

---

## 📈 质量评分

- **算法准确性**: ___/10
- **回测效果**: ___/10
- **总体评分**: ___/10

---

## 🔄 任务状态更新

- **开始时间**: ___
- **完成时间**: ___
- **是否可以继续**: ⬜ 是 / ⬜ 否

---

**创建时间**: 2025-10-17  
**最后更新**: 2025-10-17

