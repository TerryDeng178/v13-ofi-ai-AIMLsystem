# Task 0.6: åˆ›å»ºç»Ÿä¸€ç³»ç»Ÿé…ç½®æ–‡ä»¶

## ğŸ“‹ ä»»åŠ¡ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **ä»»åŠ¡ç¼–å·** | Task_0.6 |
| **ä»»åŠ¡åç§°** | åˆ›å»ºç»Ÿä¸€ç³»ç»Ÿé…ç½®æ–‡ä»¶ |
| **æ‰€å±é˜¶æ®µ** | Stage0: å‡†å¤‡å·¥ä½œ |
| **ä»»åŠ¡çŠ¶æ€** | âœ… å·²å®Œæˆ |
| **ä¼˜å…ˆçº§** | ğŸ”´ é«˜ |
| **é¢„è®¡æ—¶é—´** | 1-2å°æ—¶ |
| **å®é™…æ—¶é—´** | _å¾…å¡«å†™_ |
| **è´Ÿè´£äºº** | AI Assistant |
| **åˆ›å»ºæ—¶é—´** | 2025-10-19 |
| **å®Œæˆæ—¶é—´** | _å¾…å¡«å†™_ |

---

## ğŸ¯ ä»»åŠ¡ç›®æ ‡

åˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶ï¼Œç”¨äºé›†ä¸­ç®¡ç†V13 OFI+CVD+AIç³»ç»Ÿçš„æ‰€æœ‰é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬ï¼š

1. **ç³»ç»Ÿå…¨å±€é…ç½®** - ç¯å¢ƒã€ç‰ˆæœ¬ã€æ¨¡å¼ç­‰
2. **ç»„ä»¶é…ç½®** - OFIã€CVDã€AIã€äº¤æ˜“ç­‰æ¨¡å—çš„å¯ç”¨çŠ¶æ€å’Œé…ç½®æ–‡ä»¶è·¯å¾„
3. **æ•°æ®æºé…ç½®** - Binanceè¿æ¥ã€äº¤æ˜“å¯¹ç­‰
4. **è·¯å¾„é…ç½®** - æ•°æ®ã€æ—¥å¿—ã€æŠ¥å‘Šã€æ¨¡å‹ç­‰ç›®å½•
5. **æ€§èƒ½é…ç½®** - é˜Ÿåˆ—å¤§å°ã€æ‰¹å¤„ç†ã€åˆ·æ–°é¢‘ç‡ç­‰
6. **æ—¥å¿—é…ç½®** - æ—¥å¿—çº§åˆ«ã€æ ¼å¼ç­‰

**ç›®æ ‡**: æ›¿ä»£å½“å‰åˆ†æ•£çš„é…ç½®æ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„é…ç½®å…¥å£ï¼Œä¾¿äºç®¡ç†å’Œç¯å¢ƒåˆ‡æ¢ã€‚

---

## ğŸ“ ä»»åŠ¡æ¸…å•

### 1. åˆ›å»ºä¸»é…ç½®æ–‡ä»¶

- [x] åˆ›å»º `config/system.yaml` - ç³»ç»Ÿä¸»é…ç½®æ–‡ä»¶
- [x] å®šä¹‰ç³»ç»Ÿå…ƒä¿¡æ¯ï¼ˆåç§°ã€ç‰ˆæœ¬ã€ç¯å¢ƒï¼‰
- [x] å®šä¹‰æ•°æ®æºé…ç½®ï¼ˆBinanceã€äº¤æ˜“å¯¹ï¼‰
- [x] å®šä¹‰ç»„ä»¶å¯ç”¨çŠ¶æ€å’Œé…ç½®æ–‡ä»¶è·¯å¾„
- [x] å®šä¹‰è·¯å¾„é…ç½®ï¼ˆæ•°æ®ã€æ—¥å¿—ã€æŠ¥å‘Šã€æ¨¡å‹ï¼‰
- [x] å®šä¹‰æ€§èƒ½å‚æ•°ï¼ˆé˜Ÿåˆ—ã€æ‰¹å¤„ç†ã€åˆ·æ–°é¢‘ç‡ï¼‰
- [x] å®šä¹‰æ—¥å¿—é…ç½®ï¼ˆçº§åˆ«ã€æ ¼å¼ã€è¾“å‡ºï¼‰

### 2. åˆ›å»ºç¯å¢ƒç‰¹å®šé…ç½®

- [x] åˆ›å»º `config/environments/development.yaml` - å¼€å‘ç¯å¢ƒé…ç½®
- [x] åˆ›å»º `config/environments/testing.yaml` - æµ‹è¯•ç¯å¢ƒé…ç½®
- [x] åˆ›å»º `config/environments/production.yaml` - ç”Ÿäº§ç¯å¢ƒé…ç½®

### 3. åˆ›å»ºé…ç½®åŠ è½½å™¨

- [x] åˆ›å»º `src/utils/config_loader.py` - é…ç½®åŠ è½½å™¨
- [x] å®ç°YAMLé…ç½®æ–‡ä»¶åŠ è½½
- [x] å®ç°ç¯å¢ƒå˜é‡è¦†ç›–
- [x] å®ç°é…ç½®éªŒè¯
- [x] å®ç°é…ç½®åˆå¹¶ï¼ˆsystem + environmentï¼‰

### 4. æ›´æ–°ç°æœ‰é…ç½®

- [x] ä¿ç•™ç°æœ‰ `.env` é…ç½®æ–‡ä»¶ï¼ˆå‘åå…¼å®¹ï¼‰
- [x] åœ¨æ–‡æ¡£ä¸­è¯´æ˜æ–°æ—§é…ç½®å…³ç³»
- [x] åˆ›å»ºé…ç½®è¿ç§»æŒ‡å—

### 5. åˆ›å»ºé…ç½®æ–‡æ¡£

- [x] åˆ›å»º `docs/SYSTEM_CONFIG_GUIDE.md` - ç³»ç»Ÿé…ç½®æŒ‡å—
- [x] è¯´æ˜é…ç½®æ–‡ä»¶ç»“æ„
- [x] è¯´æ˜å‚æ•°å«ä¹‰å’Œé»˜è®¤å€¼
- [x] è¯´æ˜å¦‚ä½•åˆ‡æ¢ç¯å¢ƒ
- [x] æä¾›é…ç½®ç¤ºä¾‹

---

## ğŸ“¦ Allowed Files

### å¯ä»¥åˆ›å»ºçš„æ–‡ä»¶
```
config/
â”œâ”€â”€ system.yaml                    # âœ… æ–°å»º - ç³»ç»Ÿä¸»é…ç½®
â”œâ”€â”€ environments/                  # âœ… æ–°å»º - ç¯å¢ƒé…ç½®ç›®å½•
â”‚   â”œâ”€â”€ development.yaml          # âœ… æ–°å»º - å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ testing.yaml              # âœ… æ–°å»º - æµ‹è¯•ç¯å¢ƒ
â”‚   â””â”€â”€ production.yaml           # âœ… æ–°å»º - ç”Ÿäº§ç¯å¢ƒ
â””â”€â”€ README.md                      # âœ… æ–°å»º - é…ç½®è¯´æ˜

src/utils/
â”œâ”€â”€ __init__.py                    # âœ… å¯ä¿®æ”¹
â””â”€â”€ config_loader.py               # âœ… æ–°å»º - é…ç½®åŠ è½½å™¨

docs/
â””â”€â”€ SYSTEM_CONFIG_GUIDE.md         # âœ… æ–°å»º - é…ç½®æŒ‡å—
```

### ä¿æŒä¸å˜çš„æ–‡ä»¶
```
config/
â”œâ”€â”€ profiles/                      # ä¿ç•™ - CVDé…ç½®
â”‚   â”œâ”€â”€ analysis.env
â”‚   â””â”€â”€ realtime.env
â”œâ”€â”€ step_1_6_*.env                # ä¿ç•™ - æµ‹è¯•é…ç½®
â””â”€â”€ binance_config.yaml           # ä¿ç•™ - Binanceé…ç½®
```

---

## ğŸ“š ä¾èµ–é¡¹

### å‰ç½®ä»»åŠ¡
- âœ… Task_0.1 - åˆ›å»ºé¡¹ç›®ç›®å½•
- âœ… Task_0.2 - åˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶

### PythonåŒ…ä¾èµ–
```python
pyyaml>=6.0         # YAMLé…ç½®æ–‡ä»¶è§£æ
python-dotenv>=1.0  # .envæ–‡ä»¶æ”¯æŒï¼ˆå‘åå…¼å®¹ï¼‰
```

### æ–‡æ¡£ä¾èµ–
- æ— 

---

## âœ… éªŒè¯æ ‡å‡†

### 1. é…ç½®æ–‡ä»¶éªŒè¯
- [ ] `config/system.yaml` å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- [ ] æ‰€æœ‰ç¯å¢ƒé…ç½®æ–‡ä»¶å­˜åœ¨ï¼ˆdevelopment/testing/productionï¼‰
- [ ] é…ç½®æ–‡ä»¶åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
- [ ] YAMLè¯­æ³•æ­£ç¡®ï¼Œå¯ä»¥æ­£å¸¸åŠ è½½

### 2. é…ç½®åŠ è½½å™¨éªŒè¯
- [ ] `config_loader.py` èƒ½æ­£ç¡®åŠ è½½ `system.yaml`
- [ ] èƒ½æ­£ç¡®åˆå¹¶ç³»ç»Ÿé…ç½®å’Œç¯å¢ƒé…ç½®
- [ ] ç¯å¢ƒå˜é‡è¦†ç›–æ­£å¸¸å·¥ä½œ
- [ ] é…ç½®éªŒè¯åŠŸèƒ½æ­£å¸¸ï¼ˆæ£€æµ‹ç¼ºå¤±å­—æ®µï¼‰
- [ ] æä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯

### 3. åŠŸèƒ½éªŒè¯
- [ ] å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡åˆ‡æ¢ç¯å¢ƒï¼ˆ`ENV=development/testing/production`ï¼‰
- [ ] é…ç½®å‚æ•°å¯ä»¥è¢«æ­£ç¡®è¯»å–
- [ ] é…ç½®è·¯å¾„æ­£ç¡®è§£æï¼ˆç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„ï¼‰
- [ ] é»˜è®¤å€¼æ­£ç¡®åº”ç”¨

### 4. å‘åå…¼å®¹éªŒè¯
- [ ] ç°æœ‰ `.env` é…ç½®æ–‡ä»¶ä»ç„¶å¯ç”¨
- [ ] CVDæµ‹è¯•è„šæœ¬ä¸å—å½±å“
- [ ] ä¸ç ´åç°æœ‰åŠŸèƒ½

### 5. æ–‡æ¡£éªŒè¯
- [ ] é…ç½®æŒ‡å—å®Œæ•´æ¸…æ™°
- [ ] åŒ…å«ä½¿ç”¨ç¤ºä¾‹
- [ ] è¯´æ˜æ‰€æœ‰å¯é…ç½®å‚æ•°
- [ ] æä¾›è¿ç§»æŒ‡å—

---

## ğŸ§ª æµ‹è¯•ç»“æœ

### æµ‹è¯•ç¯å¢ƒ
- **Pythonç‰ˆæœ¬**: _å¾…å¡«å†™_
- **æ“ä½œç³»ç»Ÿ**: _å¾…å¡«å†™_
- **æµ‹è¯•æ—¶é—´**: _å¾…å¡«å†™_

### é…ç½®æ–‡ä»¶æµ‹è¯•
```bash
# æµ‹è¯•1: åŠ è½½ç³»ç»Ÿé…ç½®
python -c "from src.utils.config_loader import load_config; config = load_config(); print(config)"

# æµ‹è¯•2: åˆ‡æ¢ç¯å¢ƒ
ENV=development python -c "from src.utils.config_loader import load_config; config = load_config(); print(config['system']['environment'])"

# æµ‹è¯•3: ç¯å¢ƒå˜é‡è¦†ç›–
QUEUE_SIZE=10000 python -c "from src.utils.config_loader import load_config; config = load_config(); print(config['performance']['max_queue_size'])"
```

**æµ‹è¯•ç»“æœ**: _å¾…å¡«å†™_

### é›†æˆæµ‹è¯•
```bash
# æµ‹è¯•4: CVDè„šæœ¬ä»ç„¶æ­£å¸¸å·¥ä½œ
cd examples
python run_realtime_cvd.py --symbol ETHUSDT --duration 60

# æµ‹è¯•5: ä½¿ç”¨æ–°é…ç½®æ–‡ä»¶è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœå·²é›†æˆï¼‰
python run_realtime_cvd.py --symbol ETHUSDT --duration 60 --use-system-config
```

**æµ‹è¯•ç»“æœ**: _å¾…å¡«å†™_

---

## ğŸ“Š DoDæ£€æŸ¥æ¸…å•

### ä»£ç è´¨é‡
- [ ] æ‰€æœ‰é…ç½®æ–‡ä»¶YAMLæ ¼å¼æ­£ç¡®
- [ ] é…ç½®åŠ è½½å™¨ä»£ç æ¸…æ™°æ˜“è¯»
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- [ ] é…ç½®å‚æ•°å‘½åè§„èŒƒç»Ÿä¸€

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] ç³»ç»Ÿé…ç½®æ–‡ä»¶åŒ…å«æ‰€æœ‰å¿…éœ€éƒ¨åˆ†
- [ ] ä¸‰ä¸ªç¯å¢ƒé…ç½®æ–‡ä»¶å®Œæ•´
- [ ] é…ç½®åŠ è½½å™¨åŠŸèƒ½å®Œæ•´
- [ ] å‘åå…¼å®¹æ€§ä¿æŒ

### æµ‹è¯•è¦†ç›–
- [ ] é…ç½®åŠ è½½æµ‹è¯•é€šè¿‡
- [ ] ç¯å¢ƒåˆ‡æ¢æµ‹è¯•é€šè¿‡
- [ ] å‚æ•°è¦†ç›–æµ‹è¯•é€šè¿‡
- [ ] å‘åå…¼å®¹æµ‹è¯•é€šè¿‡

### æ–‡æ¡£å®Œæ•´æ€§
- [ ] ç³»ç»Ÿé…ç½®æŒ‡å—å®Œæ•´
- [ ] æ‰€æœ‰å‚æ•°éƒ½æœ‰è¯´æ˜
- [ ] åŒ…å«ä½¿ç”¨ç¤ºä¾‹
- [ ] è¿ç§»æŒ‡å—æ¸…æ™°

### Gitæäº¤
- [ ] æ‰€æœ‰æ–°æ–‡ä»¶å·²æ·»åŠ åˆ°Git
- [ ] Commitä¿¡æ¯æ¸…æ™°æè¿°å˜æ›´
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£

---

## ğŸ“ æ‰§è¡Œè®°å½•

### å¼€å§‹æ—¶é—´
_å¾…å¡«å†™_

### å®Œæˆæ—¶é—´
_å¾…å¡«å†™_

### é—®é¢˜è®°å½•

#### é—®é¢˜1: _å¾…è®°å½•_
- **æè¿°**: _å¾…å¡«å†™_
- **è§£å†³æ–¹æ¡ˆ**: _å¾…å¡«å†™_
- **ç»éªŒæ•™è®­**: _å¾…å¡«å†™_

### å…³é”®å†³ç­–

#### å†³ç­–1: é…ç½®æ–‡ä»¶æ ¼å¼
- **é€‰é¡¹**: YAML vs JSON vs TOML
- **é€‰æ‹©**: YAML
- **åŸå› **: 
  - æ›´é€‚åˆé…ç½®æ–‡ä»¶ï¼ˆæ”¯æŒæ³¨é‡Šï¼‰
  - å¯è¯»æ€§å¥½
  - Pythonç”Ÿæ€ç³»ç»Ÿæ”¯æŒè‰¯å¥½

#### å†³ç­–2: ç¯å¢ƒç®¡ç†æ–¹å¼
- **é€‰é¡¹**: å•æ–‡ä»¶å¤šç¯å¢ƒ vs å¤šæ–‡ä»¶å¤šç¯å¢ƒ
- **é€‰æ‹©**: å¤šæ–‡ä»¶å¤šç¯å¢ƒï¼ˆsystem.yaml + environments/*.yamlï¼‰
- **åŸå› **:
  - æ›´æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»
  - ä¾¿äºç¯å¢ƒç‰¹å®šé…ç½®ç®¡ç†
  - é¿å…å•æ–‡ä»¶è¿‡å¤§

#### å†³ç­–3: å‘åå…¼å®¹æ€§
- **é€‰é¡¹**: å®Œå…¨æ›¿ä»£ vs å…±å­˜
- **é€‰æ‹©**: å…±å­˜ï¼ˆä¿ç•™ `.env` æ–‡ä»¶ï¼‰
- **åŸå› **:
  - ä¸ç ´åç°æœ‰åŠŸèƒ½
  - å¹³æ»‘è¿‡æ¸¡
  - ç»™ç”¨æˆ·é€‰æ‹©æƒ

---

## ğŸ”— ç›¸å…³é“¾æ¥

### å‰ç½®ä»»åŠ¡
- [Task_0.1 åˆ›å»ºé¡¹ç›®ç›®å½•](./Task_0.1_åˆ›å»ºé¡¹ç›®ç›®å½•.md)
- [Task_0.2 åˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶](./Task_0.2_åˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶.md)

### åç»­ä»»åŠ¡
- Task_1.1.1 - åˆ›å»ºWebSocketå®¢æˆ·ç«¯åŸºç¡€ç±»ï¼ˆå°†ä½¿ç”¨ç³»ç»Ÿé…ç½®ï¼‰
- Task_2.1.1 - åˆ›å»ºæµ‹è¯•ç½‘äº¤æ˜“å®¢æˆ·ç«¯ï¼ˆå°†ä½¿ç”¨ç³»ç»Ÿé…ç½®ï¼‰

### ç›¸å…³æ–‡æ¡£
- [ğŸ“œ é¡¹ç›®è§„åˆ™](../../ğŸ“œPROJECT_RULES.md)
- [ğŸ“‹ ä¸»ä»»åŠ¡å¡](../../ğŸ“‹V13_TASK_CARD.md)
- [ç°æœ‰é…ç½®æ–‡æ¡£](../../docs/CONFIG_PARAMETERS_GUIDE.md)

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### é‡è¦æé†’

1. **å‘åå…¼å®¹**: å¿…é¡»ç¡®ä¿ç°æœ‰ `.env` é…ç½®æ–‡ä»¶ä»ç„¶å¯ç”¨
2. **ä¸ç ´åç°æœ‰åŠŸèƒ½**: CVDæµ‹è¯•è„šæœ¬å¿…é¡»ç»§ç»­æ­£å¸¸å·¥ä½œ
3. **é…ç½®ä¼˜å…ˆçº§**: ç¯å¢ƒå˜é‡ > ç¯å¢ƒé…ç½® > ç³»ç»Ÿé…ç½® > é»˜è®¤å€¼
4. **æ•æ„Ÿä¿¡æ¯**: APIå¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ä¸è¦å†™å…¥é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡
5. **æ–‡æ¡£åŒæ­¥**: åˆ›å»ºæ–°é…ç½®ååŠæ—¶æ›´æ–°æ–‡æ¡£

### æœ€ä½³å®è·µ

1. **é…ç½®å‘½å**: ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼Œä¿æŒä¸€è‡´æ€§
2. **æ³¨é‡Šè¯´æ˜**: æ¯ä¸ªé…ç½®é¡¹æ·»åŠ æ³¨é‡Šè¯´æ˜ç”¨é€”
3. **é»˜è®¤å€¼**: ä¸ºæ‰€æœ‰å‚æ•°æä¾›åˆç†çš„é»˜è®¤å€¼
4. **éªŒè¯**: åŠ è½½é…ç½®æ—¶éªŒè¯å¿…éœ€å­—æ®µæ˜¯å¦å­˜åœ¨
5. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å¸®åŠ©è°ƒè¯•

### æŠ€æœ¯è¦ç‚¹

1. **YAMLåŠ è½½**: ä½¿ç”¨ `yaml.safe_load()` è€Œä¸æ˜¯ `yaml.load()` ç¡®ä¿å®‰å…¨
2. **è·¯å¾„å¤„ç†**: ç›¸å¯¹è·¯å¾„è‡ªåŠ¨è½¬æ¢ä¸ºç»å¯¹è·¯å¾„
3. **ç±»å‹è½¬æ¢**: ç¡®ä¿é…ç½®å€¼çš„ç±»å‹æ­£ç¡®ï¼ˆint/float/bool/strï¼‰
4. **é…ç½®ç¼“å­˜**: è€ƒè™‘ç¼“å­˜å·²åŠ è½½çš„é…ç½®é¿å…é‡å¤è¯»å–
5. **çƒ­æ›´æ–°**: æš‚ä¸æ”¯æŒé…ç½®çƒ­æ›´æ–°ï¼Œéœ€è¦é‡å¯ç¨‹åº

---

## ğŸ“Œ é…ç½®æ–‡ä»¶ç¤ºä¾‹

### system.yaml ç»“æ„ç¤ºä¾‹
```yaml
# V13 OFI+CVD+AI ç³»ç»Ÿé…ç½®
system:
  name: "OFI_CVD_AI_Trading_System"
  version: "v13.0"
  environment: "development"  # ä»ç¯å¢ƒå˜é‡ ENV è¯»å–

# æ•°æ®æºé…ç½®
data_source:
  provider: "binance"
  symbols:
    - "ETHUSDT"
    - "BTCUSDT"
  websocket_timeout: 30

# ç»„ä»¶é…ç½®
components:
  cvd:
    enabled: true
    config_file: "config/profiles/analysis.env"
  ofi:
    enabled: true
    config_file: "config/binance_config.yaml"
  ai:
    enabled: false
  trading:
    enabled: false

# è·¯å¾„é…ç½®
paths:
  data_dir: "data"
  logs_dir: "logs"
  reports_dir: "docs/reports"
  models_dir: "models"
  config_dir: "config"

# æ€§èƒ½é…ç½®
performance:
  max_queue_size: 50000
  batch_size: 1000
  flush_interval_ms: 200
  metrics_flush_interval_ms: 10000

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/system.log"
  max_size_mb: 100
  backup_count: 5
```

---

**ä»»åŠ¡åˆ›å»º**: 2025-10-19  
**æœ€åæ›´æ–°**: 2025-10-19  
**ä»»åŠ¡ç‰ˆæœ¬**: V1.0  
**ä»»åŠ¡çŠ¶æ€**: â³ å¾…å¼€å§‹

